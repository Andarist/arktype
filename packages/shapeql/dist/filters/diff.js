"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("util");
const redo_utils_1 = require("redo-utils");
const diffable = (o) => redo_utils_1.isRecursible(o) && !Array.isArray(o);
exports.diff = (original, updated) => redo_utils_1.fromEntries(Object.entries(updated)
    .filter(([k]) => !util_1.isDeepStrictEqual(original[k], updated[k]))
    .map(([k]) => {
    return [
        k,
        diffable(original[k]) &&
            diffable(updated[k])
            ? exports.diff(original[k], updated[k])
            : updated[k]
    ];
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlmZi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9maWx0ZXJzL2RpZmYudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBd0M7QUFDeEMsMkNBQW1FO0FBRW5FLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyx5QkFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUVwRCxRQUFBLElBQUksR0FBRyxDQUFJLFFBQVcsRUFBRSxPQUFVLEVBQWtCLEVBQUUsQ0FDL0Qsd0JBQVcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztLQUM5QixNQUFNLENBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDSixDQUFDLHdCQUFpQixDQUNkLFFBQVEsQ0FBQyxDQUFZLENBQUMsRUFDdEIsT0FBTyxDQUFDLENBQVksQ0FBQyxDQUN4QixDQUNSO0tBQ0EsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0lBQ1QsT0FBTztRQUNILENBQUM7UUFDRCxRQUFRLENBQUMsUUFBUSxDQUFDLENBQVksQ0FBQyxDQUFDO1lBQ2hDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBWSxDQUFDLENBQUM7WUFDM0IsQ0FBQyxDQUFDLFlBQUksQ0FBQyxRQUFRLENBQUMsQ0FBWSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQVksQ0FBQyxDQUFDO1lBQ3JELENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBWSxDQUFDO0tBQzlCLENBQUE7QUFDTCxDQUFDLENBQVEsQ0FBbUIsQ0FBQSJ9